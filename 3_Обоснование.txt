Обоснование выбора БД, очередей, протоколов и остального
1. БД PostgreSQL
- Позволяет работать с большим числом пользователей (например 1000) что для продакшена удобно, можно рассматривать как заявку на масштабирование
- Работа с индексами, поиск по времени, id, user_id, username (раз про работу с Telegram речь), поиск по статусам и т.д.
- Инструмент проверенный временем, с большим и активным сообществом и поддержкой. Для новичка много мануалов по запуску, для опытного пользователя возможность гибкого сбора статистики.
- Эффективный и гибкий способ хранение вебхуков, а это то что нам нужно (JSONB)

2. Очереди
В текущем варианте встроенный BackgroundTasks в FastAPI
- Для концепта берём нагрузку на 1000 запросов в час, с таким объёмом должен успешно справляться
- Не надо развёртывать что то дополнительно

Если придётся масштабироваться или число запросов вырастет, то можно будет сменить

3. Протоколы взаимодействия
- Telegram к nginx по протоколу https:443. Это безопасно, а также этого требует Tg как основное требование для работы
- nginx обращается к FastAPI по http:8081. В примере используется VPS, локальная сеть,SSL, удобно и безопасно.
- FastAPI к PostgreSQL по протоколу TCP:5432. Это естественный протокол для PostgreSQL.
- FastAPI обращается к нашему условному AI агенту по HTTPS Rest:443. Тоже стандарт для внешних API.
